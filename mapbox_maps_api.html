<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>First Mapbox Map</title>
    <!-- Mapbox CSS -->
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet' />
    <!-- Custom CSS -->
    <style>
        #map {
            /* the width and height may be set to any size */
            width: 50%;
            height: 300px;
        }
    </style>
</head>
<body>

<h1>My First Mapbox Map!</h1>

<!-- The HTML element that serves as the Mapbox container -->
<div id='map'></div>

<!-- Mapbox JS -->
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>

<!-- Mapbox Geocoder Util Methods -->
<script src="js/mapbox-geocoder-utils.js"></script>


<!-- Custom JS -->
<script>
    const accessToken = 'pk.eyJ1IjoibmVsZGVscG96byIsImEiOiJja3licjBodWcwaTU0Mm9wbTlreHgybXJ6In0.Y0YKAs4Kl1_KoKhZ3IUiJA';

    mapboxgl.accessToken = accessToken;


    mapboxgl.accessToken = 'pk.eyJ1IjoibmVsZGVscG96byIsImEiOiJja3licjBodWcwaTU0Mm9wbTlreHgybXJ6In0.Y0YKAs4Kl1_KoKhZ3IUiJA';
    let map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v9',
        zoom: 20,
        center: [-105.090056, 39.958452]
    });

    let frolicInfo = {
        address: "12910 Zuni St #1300, Westminster, CO 80234",
        popupHTML: "<p>Frolic Brewing Co.-Best cold beer and pizza in town!</p>"
    };

    let places = [
        {address: "12910 Zuni St #1300, Westminster, CO 80234",
            popupHTML: "<p>Frolic Brewing Co.-Best cold beer and pizza in town!</p>",
            web: "https://www.frolicbrewing.com/"
        },
        {address: "13801 Grant St Unit 572, Thornton, CO 80023",
            popupHTML: "<p>Satire Brewing Co.-4000 Square Feet of Old World Charm</p>",
            web: "https://satirebrewingcompany.com/"
        },
        {address: "14694 Orchard Pkwy Suite 400, Westminster, CO 80023",
            popupHTML: "<p>Try the Roasted Garlic & White Bean Hummus w/ Herb Goat Cheese!</p>",
            web: "https://windfallbrewing.co/food/"
        }
    ]

        places.forEach(function(place){
            placeMarkerAndPopup(place,accessToken, map)
        })

    function placeMarkerAndPopup(info, token, map) {
        geocode(info.address, token).then(function(coordinates) {
            let popup = new mapboxgl.Popup()
                .setHTML(info.popupHTML);
            let marker = new mapboxgl.Marker()
                .setLngLat(coordinates)
                .addTo(map)
                .setPopup(popup);
            popup.addTo(map);
            map.setZoom(12);
            // map.setCenter(coordinates);
        });
    }

    // placeMarkerAndPopup(frolicInfo, accessToken, map);






    // // the  geocode method from mapbox-geocoder-utils.js
    // geocode("12910 Zuni St #1300, Westminster, CO 80234", 'pk.eyJ1IjoibmVsZGVscG96byIsImEiOiJja3licjBodWcwaTU0Mm9wbTlreHgybXJ6In0.Y0YKAs4Kl1_KoKhZ3IUiJA').then(function(result) {
    //     console.log(result);
    //     map.setCenter(result);
    //     map.setZoom(20);
    // });
</script>
</body>
</html>